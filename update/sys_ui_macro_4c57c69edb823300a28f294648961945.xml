<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_macro">
    <sys_ui_macro action="INSERT_OR_UPDATE">
        <active>true</active>
        <category>general</category>
        <description>&#13;
	&lt;j:set var="jvar_price" value="$[jvar_route.price]"&gt;&lt;/j:set&gt;</description>
        <media_type/>
        <name>route_ui_macro</name>
        <scoped_name>x_339274_dvb_app_route_ui_macro</scoped_name>
        <sys_class_name>sys_ui_macro</sys_class_name>
        <sys_created_by>jonas.kretzschmar</sys_created_by>
        <sys_created_on>2019-06-17 10:30:37</sys_created_on>
        <sys_id>4c57c69edb823300a28f294648961945</sys_id>
        <sys_mod_count>87</sys_mod_count>
        <sys_name>route_ui_macro</sys_name>
        <sys_package display_value="DVB_APP" source="x_339274_dvb_app">f37825d6db423300a28f2946489619df</sys_package>
        <sys_policy/>
        <sys_scope display_value="DVB_APP">f37825d6db423300a28f2946489619df</sys_scope>
        <sys_update_name>sys_ui_macro_4c57c69edb823300a28f294648961945</sys_update_name>
        <sys_updated_by>marc.seidel</sys_updated_by>
        <sys_updated_on>2019-06-17 13:13:58</sys_updated_on>
        <xml><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">
	
<g2:evaluate var="jvar_name" jelly="true">
	current.u_name;
</g2:evaluate>
	
<g2:evaluate var="jvar_route" jelly="true">
	var vvoapi = new VVOApi();
	JSON.stringify(vvoapi.findRoute(vvoapi.findPoint(current.u_start), vvoapi.findPoint(current.u_end), current.u_arrival.replace(' ', 'T') + '.0000Z'));
</g2:evaluate>
	
	
	<script>
		var route = JSON.parse('$[jvar_route]');
		
		window.addEventListener('load', function() {
			var element = document.getElementById('route'),
		price = document.getElementById('price'),
		pricelevel = document.getElementById('pricelevel'),
		html = "";
		
		price.innerHTML = route.price;		
		pricelevel.innerHTML = route.pricelevel;		
		
			for(var i = 0; route.parts.length > i; i++) {
				var part = route.parts[i];
				html += '<div class="route__part">' +
		'<div><span>' + part.start.time + '</span><span>' + part.start.name + '</span></div>' +
		'<div>' + part.mot.line + ' ' + part.mot.name +  '</div>' +
		'<div><span>' + part.end.time + '</span><span>' + part.end.name + '</span></div>' +
		'</div>';
			}
			element.innerHTML = html;
		});
	</script>
	
	
		<h1>Route "$[jvar_name]"</h1>
	
	<div id="price"></div>
	<div id="pricelevel"></div>
		<div id="route" class="route">
		</div>
	<style>
	.route {
		display: flex;
		flex-wrap: wrap;
	}
		
		.route__part {
			display: flex;
		
		flex: 0 0 100%;
		flex-direction: column;
		}
		
		.route__part:nth-child(even) {
			background: #f8f8f8;
		}
		
		#price::before { content: "Preis: "; }		
		#pricelevel::before { content: "Preisklasse: "; }
	</style>
</j:jelly>]]></xml>
    </sys_ui_macro>
</record_update>
